{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n// import 'dotenv/config';\n\nexport async function searchImages(userValue, currentPage) {\n  const API_KEY = '42361876-39dc0f6de1023fb2a8c585c35';\n  // const API_KEY = process.env.API_KEY;\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    key: API_KEY,\n    q: userValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    per_page: 15,\n    page: currentPage,\n    safesearch: true,\n  };\n  try {\n    const result = await axios.get(url, { params });\n    if (result.data.hits.length === 0) {\n      iziToast.show({\n        position: 'topRight',\n        messageColor: 'white',\n        progressBar: false,\n        backgroundColor: 'red',\n        closeOnClick: true,\n        close: false,\n        message:\n          'üò≠ Sorry, there are no images matching youre search query. Please, try again!',\n      });\n    }\n    return result.data;\n  } catch (error) {\n    // console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nfunction createGallery(userSymbol) {\n  return `<li class=\"gallery-item\">\n        <a href=\"${userSymbol.largeImageURL}\"> <img class=\"gallery-image\" src=\"${userSymbol.webformatURL}\" alt=\"${userSymbol.tags}\"></a>\n        <div class='discription'><p><b>Likes </b>${userSymbol.likes}</p>\n        <p><b>Views </b>${userSymbol.views}</p>\n        <p><b>Comments </b>${userSymbol.comments}</p>\n        <p><b>Downloads </b>${userSymbol.downloads}</p>\n        </div>\n      </li>`;\n}\n\nexport function renderGallery(userSymbol) {\n  const markup = userSymbol.hits.map(createGallery).join(``);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const myOptions = {\n    captionsData: 'alt',\n    captionDelay: 250,\n  };\n\n  const myGallery = new SimpleLightbox('.gallery a', myOptions);\n  myGallery.on('show.simplelightbox');\n  myGallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst formEl = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst loader = document.querySelector('.loader');\n\nformEl.addEventListener('submit', onBtnSearch);\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nlet userSymbol;\nlet page;\nlet maxPage;\n\nasync function onBtnSearch(e) {\n  e.preventDefault();\n  loader.classList.add('is-open');\n  page = 1;\n  userSymbol = e.target.elements.search.value.trim();\n  gallery.innerHTML = '';\n  if (userSymbol === '') {\n    loader.classList.remove('is-open');\n    gallery.innerHTML = '';\n    iziToast.show({\n      position: 'topRight',\n      messageColor: 'white',\n      progressBar: false,\n      backgroundColor: 'red',\n      closeOnClick: true,\n      close: false,\n      message: '‚ùå Please enter a search tag',\n    });\n  } else {\n    const images = await searchImages(userSymbol, page);\n    maxPage = Math.ceil(images.totalHits / 15);\n    renderGallery(images);\n    loader.classList.remove('is-open');\n    visibilitySelection();\n\n    e.target.reset();\n    // .then(images => {\n    //   renderGallery(images);\n    // })\n    // .catch(error => {\n    //   iziToast.show({\n    //     position: 'topRight',\n    //     messageColor: 'white',\n    //     progressBar: false,\n    //     backgroundColor: 'red',\n    //     closeOnClick: true,\n    //     close: false,\n    //     message: `‚ùå Error fetching images: ${error}`,\n    //   });\n    // })\n    // .finally(() => {\n    //   loader.classList.remove('is-open');\n    //   e.target.reset();\n    // });\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loader.classList.add('is-open');\n  if (userSymbol === '') {\n    loader.classList.remove('is-open');\n    gallery.innerHTML = '';\n    iziToast.show({\n      position: 'topRight',\n      messageColor: 'white',\n      progressBar: false,\n      backgroundColor: 'red',\n      closeOnClick: true,\n      close: false,\n      message: '‚ùå Please enter a search tag',\n    });\n  } else {\n    const images = await searchImages(userSymbol, page);\n    renderGallery(images);\n    loader.classList.remove('is-open');\n    visibilitySelection();\n\n    const heightElem = gallery.firstElementChild.getBoundingClientRect().height;\n\n    scrollBy({\n      behavior: 'smooth',\n      top: heightElem * 2,\n    });\n  }\n}\n\nfunction hideBtnLoad() {\n  btnLoadMore.classList.add('hidden');\n}\nfunction showBtnLoad() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nfunction visibilitySelection() {\n  if (page >= maxPage) {\n    hideBtnLoad();\n    iziToast.show({\n      position: 'topRight',\n      messageColor: 'white',\n      progressBar: false,\n      backgroundColor: 'blue',\n      closeOnClick: true,\n      close: false,\n      message: `We're sorry, but you've reached the end of search results`,\n    });\n  } else {\n    showBtnLoad();\n  }\n}\n"],"names":["searchImages","userValue","currentPage","API_KEY","url","params","result","axios","iziToast","error","gallery","createGallery","userSymbol","renderGallery","markup","myOptions","myGallery","SimpleLightbox","formEl","btnLoadMore","loader","onBtnSearch","onLoadMore","page","maxPage","images","visibilitySelection","heightElem","hideBtnLoad","showBtnLoad"],"mappings":"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"}